@model GarageII_TheParking.Models.ViewModels.Page<GarageII_TheParking.Models.Member>.PageResult

@{
    var memberExample = new GarageII_TheParking.Models.Member();
    ViewBag.Title = "Index";
}


<h2>Medlemssida</h2>

<p>
    <button class="submit"> @Html.ActionLink("Registrera ny användare", "Create")</button>
</p>
<p>
  <input class="submit" id="testSearchThingy" /> <button class="submit" onclick="Search()">Sök användare</button>   
</p>
<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => memberExample.Name)
        </th>
        <th>
            @Html.DisplayNameFor(model => memberExample.LastName)
        </th>
        <th>
            @Html.DisplayNameFor(model => memberExample.PersonIdNumber)
        </th>
        <th>
            @Html.DisplayNameFor(model => memberExample.PhoneNr)
        </th>
        <th>
            @Html.DisplayNameFor(model => memberExample.Address)
        </th>
        <th></th>
    </tr>

@foreach (var item in Model.Content) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.LastName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.PersonIdNumber)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.PhoneNr)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Address)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { id=item.Id }) |
            @Html.ActionLink("Details", "Details", new { id=item.Id }) |
            @Html.ActionLink("Delete", "Delete", new { id=item.Id })
        </td>
    </tr>
}

</table>
<!--int pageNr = 0, string search = null,string searchProperty=null, string orderby=null, bool isDesc= false-->
<div class="PageUI">
    @for (int i = 1; i < Model.PageCount+1; i++) {
        if (Model.CurrentPage  == i) {
            <span id="ActivePage">@i</span>
        } else {
            <span><a onclick="Page(@i)">@i</a> </span>
        }

    }
</div>

<script type="text/javascript">
    function Search() {
        var SearchString = document.getElementById("SearchString");
        var SearchProperty = document.getElementById("SearchProperty");    
        SearchString.value = document.getElementById("testSearchThingy").value;
        SearchProperty.value = "All";
        document.forms[0].submit();    
    }
    function Page(nr) {
        var SearchString = document.getElementById("CurrentPage");
        SearchString.value = nr;
        document.forms[0].submit();
    }

</script>
@using (Html.BeginForm("Index","Members",  FormMethod.Post)){ 
    @Html.HiddenFor(n => n.CurrentPage)
    @Html.HiddenFor(n => n.IsDescending)
    @Html.HiddenFor(n => n.orderbyProperty)
    @Html.HiddenFor(n => n.SearchProperty)
    @Html.HiddenFor(n => n.SearchString)
}
